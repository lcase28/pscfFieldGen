# Example Files for Initial Guess Generator

This directory tree contains several examples of how to run the guess generator.

Each example has its own directory in which to run.

## Different Input Styles

Most of the examples provided directly use PSCF (Fortran), and illustrate 
different input styles, specifically the differences between `basis` and
`motif` input for particle placement. These are found in `examples/basis_input`
and `examples/motif_input`.

To run an example, first make sure that you have PSCF installed (the Fortran
version), and have added `pscf_field_generator` to your python path.
When that is done, navigate to the example's directory. Each example has an 
executable script called `run` which will generate the KGRID file (`rho_kgrid`) and use pscf to
convert that to an RGRID format (`rho_rgrid`). That executable can be started by entering 

```
./run
```

from within the example's directory. This script redirects the output from pscf
into a log file called `conversionLog`. The same set of calculations can be done
without the `run` script by executing the following commands on the command line:

```
python -m pscf_field_generator -f model
pscf < param_kgrid > conversionLog
```

After running an example, the files generated by it can
be removed by entering 

```
./clean
```

on the command line in order to prepare the directory to run again. The script
simply deletes the three files (`rho_kgrid`, `rho_rgrid`, `conversionLog`) that
are produced by running the example.

### Basis Input

Examples in the directory `basis_input` show how to generate an initial guess
by entering the crystals structure's full basis of particle positions. 
These examples all use the Fortran version of PSCF.
Available morphologies are:

 * 2-Dimensional
    * hexagonally packed cylinders (`hex`)
 * 3-Dimensional
    * BCC Spheres (`bcc')
    * Frank-Kasper A15 Spheres (`a15`)
    * Frank-Kasper sigma Spheres (`sigma`)

### Motif Input

Examples in the directory `motif_input` show how to generate an initial guess
by entering a motif of particles and letting space group symmetry generate
the rest.
These examples all use the Fortran version of PSCF.
Available morphologies are:

 * BCC Spheres (`bcc')
 * Frank-Kasper A15 Spheres (`a15`)
 * Frank-Kasper sigma Spheres (`sigma`)
 * Frank-Kasper c14 Spheres (`c14`)

## Use with PSCF (C++/Cuda)

Examples in the directory `pscfpp_style` illustrate how to use the guess generator
for C++/Cuda version calculations (Until C++ version parameter files become supported).
In order to run these examples, first make sure that PSCF (C++/Cuda) is installed on your
machine, and that `pscf_field_generator` is available as a module in your python environment.
Available morphologies are:

 * 2-Dimensional
    * hexagonally packed cylinders (`hex`)
 * 3-Dimensional
    * BCC Spheres (`bcc')

These example directories have two run options. The first is comparable to the execution
of the `basis_input` and `motif_input` examples. After navigating to the example's root
directory, entering

```
./run
```

on the command line will cause pscf_field_generator to print the density field to the 
file `in/rho_kgrid` and then will use PSCF (C++/Cuda) to convert that to `in/rho_rgrid`.
This is equivallent to entering the following commands manually:

```
python -m pscf_field_generator -f model
[ pscf_pc2d  |  pscf_pc3d ] -e -p param -c command
```

where `[ pscf_pc2d  |  pscf_pc3d ]` indicates that you should select the proper program
for the dimensionality of the problem - `pscf_pc2d` for the hex example, and `pscf_pc3d`
for the bcc example.

These examples also contain a second execution option which will generate the field and
and then use PSCF (C++/Cuda) to converge the field using the `ITERATE` command.
To try this execution option, enter:

```
./runConvergence
```

on the command line. This will again produce the files `in/rho_kgrid` and `in/rho_rgrid` 
representing the density field in KGRID and RGRID format. Additionally, it will generate the
density field in the BASIS fomat (`in/rho`), convert the density field to a chemical
potential field in BASIS format (`in/omega`), converge the field, and print the converged
field as a BASIS-format chemical potential field (`out/omega`) 
and an RGRID-format density field (`out/rho_rgrid`)
This execution path is equivallent to entering 

```
python -m pscf_field_generator -f model
[ pscf_pc2d  |  pscf_pc3d ] -e -p param -c command_long
```

on the command line. As with the other examples, these examples contain a `clean` script
to remove the files from the `in/` and `out/` directories to prepare the example to run again.
