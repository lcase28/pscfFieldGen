# Examples: Network Structures

The examples in this collection illustrate how to run pscfFieldGen
for network phases using the levelset method.
All examples in this collection use PSCF (Fortran) for
field format conversions and SCFT calculations after running pscfFieldGen.

## Available Geometries

Morphology                      | Directory |  Dim  | Crystal Sys   | Space Group
----------------------------    | --------- | ----- | ------------  | -----------
Gyroid                          | `gyroid/` |   3   | cubic         | I a -3 d

## Running the Examples

To run an example, first make sure that you have PSCF installed (the Fortran
version), and have added pscfFieldGen to your python path.
When that is done, navigate to the example's directory. Each example has two
automated execution options. The first of these focuses on the pscfFieldGen 
operation, generating only the RGRID initial guess field file.
The second option does this and continues on to and converge the field
using PSCF.

### Quick Run

The first automated run option performs the level-set method and outputs the
RGRID format initial guess as `rho_rgrid.in`.
This execution option is automated
by the executable script `quickrun` available in the directory, and can be launched
by typing

```
./quickrun
```

on the command line from within the example's directory. 
The script acts as a shorthand for the following
commands, which could be used directly

```
python -m pscfFieldGen -f model -v > generationLog
```

The first line of the script uses the verbose invocation of pscfFieldGen
to generate a RGRID field file ('rho_rgrid.in'). The verbose invocation 
(flag `-v`) causes the program to echo the input read from *model*
along with some event-related output and partial calculation results.
The addition of ` > generationLog`
at the end of the command redirects this output to a file 'generationLog'.

The internal operation of the level-set method uses PSCF (Fortran) to 
convert a symmetry-adapted basis field file to an RGRID file.
This internal operation produces a parameter file, two field files, and
a log of output from the execution of PSCF. All four of these files are
generated in a sub-directory called `_network_generator_internal_`, 
which is created by the program within the directory from which the program
is invoked (it is a sub-directory of the example's directory).

### Full Run

The second automated run option expands on the first and solves the
SCFT equations from the generated initial guess. This execution option
is automated by the *fullrun* script present in the example directory.
It can be invoked by entering

```
./fullrun
```

on the command line from within the example's directory. 
This script is equivallent to the following commands

```
python -m pscfFieldGen -f model -v > generationLog
pscf < param > solutionLog
```

The first two lines in this execution are identical to those 
in the quick run, and behave identically.
The last command executes PSCF using the parameter file 
'param'. This first converts the concentration field
in 'rho_rgrid.in' to a basis format file called 'rho.in' and
subsequently converts that to a chemical potential 
field file 'omega.in'. This field file is then used as input to
an ITERATE command, which generates the files 'out', 'rho', and
'omega'. After convergence, the concentration field in 'rho' is 
converted to RGRID format in 'rho_rgrid' for visualization.
The output from this is redirected into 'solutionLog'.

If the *quickrun* execution has completed and the directory
has not yet been cleaned (see the next section), then the
*fullrun* execution pathway can be completed simply by executing
the second command listed above.

## Resetting the Example

Because of the large number of files produced by the example,
a script is provided to automatically delete all of these files to reset
the example.
After running an example, the files generated by it can
be removed by entering 

```
./clean
```

on the command line. The script checks which of the expected files
(as listed above) are present in the directory and deletes those that
are, including the `_network_generator_internal_` sub-directory.
This leaves the example directory empty for another run.

